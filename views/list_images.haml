%head
  %script{ :type=>"text/javascript", :src=>"/javascripts/jquery-1.7.1.min.js" }
  :javascript
    $(function() {
      $('.image-list').delegate('a.delete', 'click', function(e) {
        var link = e.target;
        if (!link) return false;

        $.ajax({
          url: link.href,
          type: 'delete',
          success: function() {
            window.location.reload();
          }
        });
        return false;
      });
    });

  %style{:type=>'text/css'}
    :sass
      .image-list
        list-style-type: none
      .pager
        ul
          list-style-type: none
        li
          display: inline

%body
  %h1 Images

  %ul.image-list
    - @images.each do |image|
      %li
        %a.delete{:href => "/#{@list.creator}/lists/#{@list.slug}/images/#{image.id}/destroy"}==[&times;]
        %img{:src => image.imgur_url}

  = @images.pager.to_html(request.path_info)

  %a{:href => "/#{@list.creator}/lists/#{@list.slug}/images/fail"} Images
  = " | "
  %a{:href => "/logout"} logout
